{
    "parser_version": "Parser/V1",
    "body": {
        "header": {
            "uid": {
                "id": "collapsedet_camera_49_49_18",
                "version": "v0.0.1",
                "releaseTag": "stable"
            }
        },
        "spec": {
            "@templateType": "template.vdag.app-layout.sample-vdag:v0.0.1-beta",
            "values": {
                "masterDAG": {
                    "runtimeID": "default-mdag",
                    "db_location": "framequeues-3"
                },
                "source": {
                    "assignmentType": "source",
                    "id": "camera_49_49_18_1",
                    "settings": {
                        "controller_node": "framequeues-3"
                    },
                    "parameters": {
                        "fps": "1/4",
                        "actuation_frequency": 1,
                        "gpu_id": 1,
                        "use_gpu": true,
                        "allocation_node": "framequeues-3",
                        "mode": "memory",
                        "loop_video": true,
                        "as_live": true,
                        "frame_quality": 90,
                        "color_format": "BGR"
                    }
                },
                "settings": {
                    "alert_url": "http://test-alerts.io",
                    "test": {
                        "x": "hello",
                        "y": "world",
                        "z": [{
                            "a": "hello",
                            "b": "world"
                        }, {
                            "c": "hello",
                            "d": "world"
                        }]
                    },
                    "ALERTIDURL":"http://serverip:serverport/getalertid"
                },
                "nodes": [{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "usecase-rest-api",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.usecase.usecase-frames:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "log_level": "info",
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "cl_data": false,
                                    "enabled": false
                                },
                                "usecase": {
                                    "filters": [{
                                        "key": "RESTInference",
                                        "params": {
                                            "url": "http://serverip:port1:port/objectdetection",
                                            "inference_params":{"confidence":0.3},
                                            "DATADB":{"ip":"serverip:port7","password":"pass","db":5,"port":6379}
                                        }
                                    }]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": false
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                },{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "fallDet-1",
                            "nodeType": "algorithm",
                            "componentURI": "node.algorithm.objdet.fall7Detection_640h_896:v0.0.1-stable",
                            "settings": {
                                "use_fp16": true,
                                "use_cuda": true,
                                "batch_size": 8,
                                "decoderType": "DALI",
                                "interpolationType": "INTERP_GAUSSIAN",
                                "FullImage": true,
                                "enable_batching": true,
                                "width": 896,
                                "height": 896,
                                "decoder_width": 1920,
                                "decoder_height": 1080,
                                "stretch_image": false,
                                "blockRoiEnabled": false,
                                "roiBatchSize": 1
                            },
                            "parameters": {
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false,"drawKeyPoints":true}]
                                },
                                "alerts": {
                                    "enabled": false
                                },
                                "conf": 0.25,
                                "nms_iou": 0.4
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                },{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "policy-0",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.policy.policy:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "enabled": false
                                },
                                "policies": {
                                    "filters": [{
                                        "key": "class_filter",
                                            "params": {
                                                "allowed_classes": [
                                                    "Fall","fall"
                                                ]
                                            }
                                        },
                                        {
                                            "key": "inside_zone",
                                            "params": {
                                                "zone": ["ZoneCollapse"],
                                                "pivotPoint": "midPoint"
                                            }
                                        },
                                        {
                                            "key": "class_replacer",
                                            "params": {
                                                "class_replace_tuples":[["fall","Fall"]]
                                            }
                                        }
                                    ]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                }, {
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "policy-1",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.policy.policy_mux:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "enabled": false
                                },
                                "policies": {
                                    "filters": [
                                        {
                                            "key": "class_filter",
                                                "params": {
                                                    "allowed_classes": [
                                                        "Fall","fall","person","motorcycle","bicycle","car","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe"
                                                    ]
                                                }
                                            },
                                            {
                                                "key": "inside_zone",
                                                "params": {
                                                    "zone": ["ZoneCollapse"],
                                                    "pivotPoint": "midPoint"
                                                }
                                            },
                                            {
                                                "key": "class_replacer",
                                                "params": {
                                                    "class_replace_tuples":[["fall","Fall"],["motorcycle","vehicle"],["bicycle","vehicle"],["car","vehicle"],["bird", "Animal"], ["cat", "Animal"], ["dog", "Animal"], ["horse", "Animal"], ["sheep", "Animal"], ["cow", "Animal"], ["elephant", "Animal"], ["bear", "Animal"], ["zebra", "Animal"], ["giraffe", "Animal"]]
                                                }
                                            },
                                            {
                                                "key":"associate",
                                                "params": {"type":"pixel2d","sort":"descending","preprocess":{},
                                                "selection":["many","many","many"],"comparisons":[["Fall","person"],["Animal","Fall"],["vehicle","Fall"]],
                                                "dist2d_threshold":5,"postprocess":{"primary":["Fall","Animal","vehicle"],"policy":"Keep1" }}
                                            }
                                    ]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                }, {
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "policy-2",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.policy.policy:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "log_level": "info",
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "enabled": false
                                },
                                "policies": {
                                    "filters": [
                                        {
                                            "key":"associate",
                                            "params": {"type":"pixel2d","sort":"descending","preprocess":{},
                                            "selection":["many","many"],"comparisons":[["Fall","Animal"],["Fall","vehicle"]],
                                            "dist2d_threshold":5,"postprocess":{"primary":["Fall","Fall"],"policy":"remove"}}
                                        }
                                    ]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                },{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "tracker-1",
                            "nodeType": "algorithm",
                            "componentURI": "node.algorithm.tracker.trackerlite:v0.0.1-stable",
                            "settings": {
                                "ttl": 4,
                                "tracker_type": "NONE",
                                "keep_upper_height_ratio": 1.0,
                                "decoderType": "DALI",
                                "interpolationType": "INTERP_GAUSSIAN",
                                "batch_size": 16,
                                "enable_batching": true
                            },
                            "parameters": {
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":true,"arrow":true,"alertHighlight":true,"caliberation":true}]
                                },
                                "alerts": {
                                    "enabled": false
                                },
                                "iou": 0.45,
                                "sigma_iou": 0.3,
                                "sigma_h": 0.3,
                                "sigma_l": 0.1,
                                "t_min": 1
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                },{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "usecase-1",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.usecase.usecase:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "log_level": "info",
                                "mjpeg": {
                                    "enabled": true,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}],
                                    "storageParams": [{
                                        "MINIO": {
                                            "endpoint": "serverip:port112",
                                            "access_key": "secretAccess",
                                            "secret_key": "secretKey",
                                            "MINIOURLREPLACEMENT": ""
                                        }
                                    }],
                                    "dbParams": [{
                                        "MONGO": {
                                                "host": "mongodURI",
                                                "dbname": "PROJECT_ALERT",
                                            "collection": "alerts"
                                        }
                                    }],
                                    "dataPushParams": [{
                                        "REDIS": {
                                            "host": "serverip:port7",
                                            "port": 6379,
                                            "password": "pass",
                                            "db": 0
                                        }
                                    }]
                                },
                                "usecase": {
                                    "filters": [{
                                        "key": "fallDetection",
                                        "params": {
                                            "fallConfidence":0.7,
                                            "personConfidence":0.5,
                                            "associate": "False",
                                            "fall_time": 60,
                                            "trigger_block": true,
                                            "trigger_interval": 1,
                                            "non_fall_time":2,
                                            "alert_interval": 300,
                                            "severity": "medium"
                                        }
                                    }]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": false,
                                    "componentURI": "node.utils.alert.alert:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        },{
                            "name": "input_1",
                            "reference": "input_1"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                },{
                    "spec": {
                        "@templateType": "template.nodes.generic.generic_node:v0.0.1-beta",
                        "values": {
                            "nodeLabel": "usecase-1-final",
                            "nodeType": "algorithm",
                            "componentURI": "node.utils.usecase.usecase:v0.0.1-stable",
                            "settings": {},
                            "parameters": {
                                "log_level": "info",
                                "mjpeg": {
                                    "enabled": false,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}]
                                },
                                "alerts": {
                                    "enabled": true,
                                    "drawingParams": [{"zone":true,"roi":true,"line":false,"arrow":false,"alertHighlight":true,"caliberation":false}],
                                    "storageParams": [{
                                        "MINIO": {
                                            "endpoint": "serverip:port112",
                                            "access_key": "secretAccess",
                                            "secret_key": "secretKey",
                                            "MINIOURLREPLACEMENT": ""
                                        }
                                    }],
                                    "dbParams": [{
                                        "MONGO": {
                                            "host": "mongodURI",
                                            "dbname": "PROJECT_ALERT",
                                            "collection": "alerts"
                                        }
                                    }],
                                    "dataPushParams": [{
                                        "REDIS": {
                                            "host": "serverip:port7",
                                            "port": 6379,
                                            "password": "pass",
                                            "db": 0
                                        }
                                    }]
                                },
                                "usecase": {
                                    "filters": [{
                                        "key": "fallDetectionTrigger",
                                        "params": {
                                            "fallConfidence":0.7,
                                            "personConfidence":0.5,
                                            "associate": "False",
                                            "fall_time": 60,
                                            "non_fall_time":2,
                                            "alert_interval": 300,
                                            "severity": "medium"
                                        }
                                    }]
                                }
                            },
                            "nodeDescription": "Hello-world!"
                        }
                    },
                    "scaleSpec": {
                        "@templateType": "template.scale.allocation.allocation-sample:v0.0.1-beta",
                        "values": {
                            "clusterID": "registry.k8s.clusters.default-cluster",
                            "machineID": "framequeues-3",
                            "gpuID": 1,
                            "configurations": {
                                "mjpeg": {
                                    "enabled": true,
                                    "componentURI": "node.utils.drawing.drawing:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                },
                                "alerts": {
                                    "enabled": true,
                                    "componentURI": "node.utils.alert.alert:v0.0.1-stable",
                                    "dimensions": {
                                        "width": 1920,
                                        "height": 1080
                                    }
                                }
                            }
                        }
                    },
                    "IOMap": [{
                        "inputs": [{
                            "name": "input_0",
                            "reference": "input_0"
                        },{
                            "name": "input_1",
                            "reference": "input_1"
                        }],
                        "outputs": [{
                            "name": "output_0",
                            "reference": "output_0"
                        }]
                    }],
                    "extensions": []
                }],
                "graph": {
                    "input": [{
                        "nodeLabel": "fallDet-1",
                        "inputNames": [
                            "input_0"
                        ]
                    }],
                    "output": [{
                        "nodeLabel": "usecase-1-final",
                        "outputNames": [
                            "output_0"
                        ]
                    }],
                    "connections": [{
                        "nodeLabel": "policy-1",
                        "inputs": [{
                            "nodeLabel": "usecase-1",
                            "outputNames": [
                                "output_0"
                            ]
                        },{
                            "nodeLabel": "usecase-rest-api",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },
                    {
                        "nodeLabel": "policy-2",
                        "inputs": [{
                            "nodeLabel": "policy-1",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },
                    {
                        "nodeLabel": "usecase-rest-api",
                        "inputs": [{
                            "nodeLabel": "usecase-1",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },
                    {
                        "nodeLabel": "tracker-1",
                        "inputs": [{
                            "nodeLabel": "policy-0",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },{
                        "nodeLabel": "policy-0",
                        "inputs": [{
                            "nodeLabel": "fallDet-1",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },{
                        "nodeLabel": "usecase-1",
                        "inputs": [{
                            "nodeLabel": "tracker-1",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    },{
                        "nodeLabel": "usecase-1-final",
                        "inputs": [{
                            "nodeLabel": "policy-2",
                            "outputNames": [
                                "output_0"
                            ]
                        }]
                    }]
                }
            }
        }
    }
}